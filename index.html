<!doctype html>
<head>
  <style type="text/css">
    canvas {
        width: 100vw;
        height: 100vh;
        position: absolute;
        top: 0;
        left: 0;
        z-index: -1;
    }

    #note {
      position: absolute;
      bottom: 0vh;
      width: 100vw;
      font-size: 14px;
      text-align: center;
      color: #888;
    }
    body {
        color: white;
    }

    #ui-objects {
      position: absolute;
      top: 1em;
      left: 1em;
    }

    #ui-lights {
      position: absolute;
      top: 1em;
      right: 1em;
    }
  </style>
</head>
<body>
  <script id="vertex-shader" type="x-shader/x-vertex">
    attribute vec3 aPosition, aNormal;
    uniform mat4 uPerspective, uTransform;
    uniform vec4 uAmbient, uDiffuse, uSpecular;
    uniform vec4 uLight;
    varying vec4 vColor;

    void main() {
      vec4 pos = uTransform * vec4(aPosition, 1.0);
      gl_Position = uPerspective * pos;

      vec3 N = normalize((uTransform * vec4(aNormal, 0.0)).xyz);
      vec3 L = normalize(uLight.xyz + pos.xyz);
      vec3 E = normalize(pos.xyz);
      vec3 H = normalize(L + E);

      float Kd = max(dot(L, N), 0.0);
      vec4 diffuse = Kd * uDiffuse;

      float Ks = pow(max(dot(N, H), 0.0), 100.0);
      vec4 specular = Ks * uSpecular;

      if (dot(L, N) < 0.0) {
          specular = vec4(0.0, 0.0, 0.0, 1.0);
      }

      vColor = uAmbient + diffuse + specular;
      vColor.a = 1.0;
    }
  </script>
  <script id="fragment-shader" type="x-shader/x-fragment">
    precision mediump float;

    varying vec4 vColor;

    void main() {
      gl_FragColor = vColor;
    }
  </script>
  <script type="text/javascript" src="Common/webgl-utils.js"></script>
  <script type="text/javascript" src="Common/initShaders.js"></script>
  <script type="text/javascript" src="Common/flatten.js"></script>
  <script type="text/javascript" src="Common/MV.js"></script>
  <script type="text/javascript" src="shapes.js"></script>
  <script type="text/javascript" src="ui.js"></script>
  <script type="text/javascript" src="glcad.js"></script>
  <canvas id="canvas"></canvas>

  <div id="ui-objects">
    <div id="additions">
      <button id="addcone">+ Cone</button>
      <button id="addsphere">+ Sphere</button>
      <button id="addcylinder">+ Cylinder</button>
    </div>
    <div id="selector">
      <select id="objects">
        <option selected=selected disabled=disabled>-select object-</option>
      </select>
      <button id="kill">- Remove</button>
    </div>
    <div id="controls">
      x: <input id="xpos" type="range" min="-2.0" max="2.0" step="0.05"><br>
      y: <input id="ypos" type="range" min="-2.0" max="2.0" step="0.05"><br>
      z: <input id="zpos" type="range" min="-10.0" max="-0.1" step="0.1" value="-2.0"><br>
      &#x03d5;: <input id="phi" type="range" min="-180" max="180" step="1"><br>
      &#x03c1;: <input id="rho" type="range" min="-180" max="180" step="1"><br>
      &#x03b8;: <input id="theta" type="range" min="-180" max="180" step="1"><br>
    </div>
  </div>

  <div id="ui-lights">
    Light 1, Light 2
  </div>

  <div id="note">
      Tested only in Chrome.
  </div>
</body>
